extends _layout

block content
  pageName = 'settled-enterprises'

  include partials/_header.jade

  .container.page-container

  script(id="page", data-tmpl-html=".page-container", type='text/template').
    <div data-tmpl-unescape>{{{content}}}</div>

  include partials/_footer.jade

block append scripts
  :coffee
    matchs = location.search.match /(\?|&)id=(\d+)(&|$)/
    unless matchs and matchs[2]
      $tmpl 'page', content: '找不到该页面'
      return

    requester.get("/articles/pages/#{matchs[2]}").done (page) ->
      document.title = page.name + ' - HIPARK'
      activeMenuItem 'page', page.id
      $tmpl 'page', page
    .fail ->
      $tmpl 'page', content: '请求数据失败'


